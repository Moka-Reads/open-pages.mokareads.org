<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta
            name="description"
            content="Open Pages - Accessible academic research papers and publications by MoKa Reads, promoting open knowledge and collaboration"
        />
        <title>Open Pages | Academic Research Repository | MoKa Reads</title>

        <!-- Fonts -->
        <link
            href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500&family=Merriweather:wght@400;700&display=swap"
            rel="stylesheet"
        />

        <!-- Font Awesome Icons -->
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
        />

        <!-- Stylesheets -->
        <link rel="stylesheet" href="dist/css/style.css" />
        <link
            rel="stylesheet"
            href="dist/css/theme-default.css"
            id="theme-stylesheet"
        />

        <!-- For progressive enhancement, add a basic loading state -->
        <style>
            body.loading {
                cursor: wait;
            }
            .loading-indicator {
                display: none;
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                text-align: center;
                z-index: 9999;
            }
            body.loading .loading-indicator {
                display: block;
            }
        </style>
    </head>
    <body class="loading">
        <!-- Loading Indicator -->
        <div class="loading-indicator">
            <i class="fas fa-spinner fa-spin fa-3x"></i>
            <p>Loading papers...</p>
        </div>

        <!-- Theme Selector -->
        <div class="theme-selector">
            <label for="theme-select">
                <i class="fas fa-palette"></i>
                <span>Theme:</span>
            </label>
            <select id="theme-select">
                <option value="default">Default</option>
                <option value="maple">Maple</option>
            </select>
        </div>

        <!-- Header -->
        <header>
            <h1>ðŸ“– Open Pages ðŸ“–</h1>
            <p>
                Accessible academic research, promoting open knowledge and
                accelerating progress through collaboration
            </p>
        </header>

        <!-- Main Content -->
        <main class="container">
            <!-- Search and Filters -->
            <div class="filters-container">
                <div class="search-container">
                    <i class="fas fa-search"></i>
                    <input
                        type="text"
                        id="search-input"
                        class="search-input"
                        placeholder="Search by title, topic, or tag..."
                    />
                </div>

                <select id="category-filter" class="filter-select">
                    <option value="">All Categories</option>
                    <!-- Categories will be added by JavaScript -->
                </select>

                <select id="status-filter" class="filter-select">
                    <option value="">All Statuses</option>
                    <option value="working">Working On</option>
                    <option value="idea">Idea</option>
                    <option value="completed">Completed</option>
                </select>

                <select id="sort-order" class="filter-select">
                    <option value="title-asc">Title (A-Z)</option>
                    <option value="title-desc">Title (Z-A)</option>
                    <option value="date-desc">Newest First</option>
                    <option value="date-asc">Oldest First</option>
                </select>
            </div>

            <!-- Paper List -->
            <div id="paper-list" class="paper-list">
                <!-- Papers will be added by JavaScript -->
            </div>
        </main>

        <!-- Paper Details Modal -->
        <div id="paper-modal" class="modal">
            <div class="modal-content">
                <button class="close-modal">&times; Close</button>
                <div id="modal-content">
                    <!-- Paper details will be added by JavaScript -->
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer>
            <p>
                Open Pages is an initiative by
                <a href="https://moka-reads.org" target="_blank">MoKa Reads</a>
            </p>
        </footer>

        <!-- Scripts -->
        <!-- Required for markdown parsing -->
        <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/js-yaml@4.1.0/dist/js-yaml.min.js"></script>

        <!-- Main application scripts -->
        <script src="dist/js/papers.js"></script>
        <script src="dist/js/main.js"></script>
        <script>
            // Initialize when document is ready
            document.addEventListener("DOMContentLoaded", function () {
                if (window.papersManager) {
                    console.log("papersManager found in global scope");
                    window.papersManager
                        .init()
                        .catch((e) =>
                            console.error("Failed to initialize papers:", e),
                        );
                } else {
                    console.error("papersManager not found in global scope!");
                    document.body.innerHTML +=
                        '<div style="color:red;padding:20px;">Error: Papers module not loaded correctly</div>';
                }
            });
        </script>
    </body>
</html>
